-- 1 trae automaticamente el id?
db.clientes.find({
    nombre: "Wanda",
    apellido: "Baker"
}, {
    telefonos: 1
})

-- 2 No funciona con como esta ahora, hacer lookup o meter facturas en clientes
db.clientes.find({
    "facturas.0": { $exists: true }
})

-- 2.5 tal vez asi?
db.clientes.find({
  nro_cliente: {
    $in: db.facturas.distinct("cliente_id")
  }
})


-- 3 No funciona con como esta ahora, hacer lookup o meter facturas en clientes
db.clientes.find({
    facturas: { $exists: false }
})

-- 3.5 tal vez asi?
db.clientes.find({
  nro_cliente: {
    $nin: db.facturas.distinct("cliente_id")
  }
})


-- 4 no estoy seguro
db.productos.find({
    _id: {
        $in: db.facturas.distinct("detalles.codigo_producto")
    }
})

-- 5 Aca estariamos mostrando todos los telefonos de una, a diferencia de antes
db.clientes.find({}, { nombre: 1, apellido: 1, telefonos: 1 })


-- 6


-- 7
db.facturas.aggregate([
  {
    $lookup: {
      from: "clientes",
      localField: "cliente_id",
      foreignField: "nro_cliente",
      as: "cliente"
    }
  },
  {
    $match: {
      $and: [
        { "cliente.nombre": "Pandora" },
        { "cliente.apellido": "Tate" }
      ]
    }
  }
])

-- 8 
db.facturas.aggregate([
  {
    $lookup: {
      from: "productos",
      localField: "detalles.codigo_producto",
      foreignField: "codigo_producto",
      as: "producto"
    }
  },
  {
    $match: {
      "producto.marca": "In Faucibus Inc."
    }
  }
])

-- 9

-- 10
